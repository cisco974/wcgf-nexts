deployment:
  tasks:
    - touch /home/cayi7350/test.wcgf.com/.deploying
    - source /home/cayi7350/nodevenv/test.wcgf.com/22/bin/activate

    # 3ï¸âƒ£ AccÃ¨s au rÃ©pertoire du projet
    - cd /home/cayi7350/test.wcgf.com

    # 4ï¸âƒ£ Nettoyage et mise Ã  jour du code
    - git reset --hard origin/master
    - git pull origin master

    # ğŸ§¹ Nettoyage du cache
    - rm -rf .next
    - rm -rf build

    # 5ï¸âƒ£ VÃ©rification et installation de Next.js et ses dÃ©pendances
    - npm install

    # 9ï¸âƒ£ Build de l'application Next.js
    - npm run build

    # ğŸ“‹ Copie des fichiers nÃ©cessaires
    - cp public/.htaccess build/

    # ğŸ“Œ DÃ©bloquer le monitor aprÃ¨s le dÃ©ploiement
    - rm -f /home/cayi7350/test.wcgf.com/.deploying

    # ğŸ”„ RedÃ©marrage de l'application
    #- ./restart.sh

    # ğŸ”„ RedÃ©marrage de l'application
    - touch /home/cayi7350/test.wcgf.com/tmp/restart.txt
